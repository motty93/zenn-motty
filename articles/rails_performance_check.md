---
title: "最近改善したRailsのパフォーマンス一覧"
emoji: "🚆"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["rails"]
published: false
---

どうもてぃです。
冬はどこにいったんですかね？2.5畳の仕事部屋が暑くてとても困っています。

それはさておき、最近お手伝いしている会社さんのECサイトでパフォーマンス改善を行ったので、どういう改善をおこなったかを書いていきたいと思います。

## 環境
- Ruby 2.7.8
- Rails 6.0.6

## N+1
出ました。基本中の基本です。
割と漏れがちなのが、ActiveStorageを使用したテーブルの結合。

## 今後改善したいこと
### 画像容量
数十KB程度の画像をプレビューで表示している。

### ページネーション
kaminariでtotal_pagesを使用すると激重。
一覧表示する際にもtotal_pagesしているため、いい感じにtotal_pagesできるようにしたい。
そもそもユースケースとしてページネーションを使っているかどうか怪しいので、そこの調査もしたい。
